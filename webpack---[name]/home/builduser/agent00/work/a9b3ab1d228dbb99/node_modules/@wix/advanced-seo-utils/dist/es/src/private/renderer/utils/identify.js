import {
    IDENTIFIERS
} from '../../types/Identifiers';
import {
    TAG_SCHEMAS
} from '../../types/TagSchemas';
import {
    validateTagStructure
} from '../../tags/utils/validate-tag-structure';
/**
 * Tries to identify a tag and either returns identifier or `undefined`.
 *
 * @param {*} tag to identify.
 */
export function identify(tag, ignoreList) {
    if (ignoreList === void 0) {
        ignoreList = [];
    }
    if (!tag) {
        return undefined;
    }
    var identifierKeys = getFilteredIdentifierKeys(IDENTIFIERS, ignoreList);
    return identifierKeys.find(function(identifier) {
        var schema = TAG_SCHEMAS[identifier];
        if (!schema) {
            return false;
        }
        return validateTagStructure(tag, schema);
    });
}

function getFilteredIdentifierKeys(identifiers, ignoreList) {
    return Object.keys(identifiers).filter(function(identifierKey) {
        return !ignoreList.includes(identifierKey);
    });
}